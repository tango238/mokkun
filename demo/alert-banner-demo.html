<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AlertBanner Component Demo</title>
  <link rel="stylesheet" href="../src/style.css">
  <style>
    body {
      padding: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .demo-section {
      margin-bottom: 3rem;
    }

    .demo-section h2 {
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--color-border);
    }

    .demo-section h3 {
      margin-top: 2rem;
      margin-bottom: 1rem;
      font-size: 1.125rem;
      color: var(--color-text-muted);
    }

    .demo-container {
      margin-bottom: 1.5rem;
    }

    .demo-controls {
      margin-top: 1rem;
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .demo-controls button {
      padding: 0.5rem 1rem;
      border: 1px solid var(--color-border);
      background: var(--color-surface);
      border-radius: var(--border-radius-md);
      cursor: pointer;
      font-size: 0.875rem;
      transition: all 0.2s;
    }

    .demo-controls button:hover {
      background: var(--color-bg-subtle);
      border-color: var(--color-primary);
    }

    .demo-controls button:active {
      transform: scale(0.98);
    }

    .theme-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      padding: 0.75rem 1.5rem;
      background: var(--color-primary);
      color: white;
      border: none;
      border-radius: var(--border-radius-md);
      cursor: pointer;
      font-weight: 500;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      transition: all 0.2s;
      z-index: 1000;
    }

    .theme-toggle:hover {
      background: var(--color-primary-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .code-block {
      background: var(--color-bg-subtle);
      border: 1px solid var(--color-border);
      border-radius: var(--border-radius-md);
      padding: 1rem;
      margin-top: 0.5rem;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.875rem;
      overflow-x: auto;
    }

    .event-log {
      background: var(--color-bg-subtle);
      border: 1px solid var(--color-border);
      border-radius: var(--border-radius-md);
      padding: 1rem;
      margin-top: 1rem;
      max-height: 200px;
      overflow-y: auto;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.875rem;
    }

    .event-log-item {
      padding: 0.25rem 0;
      border-bottom: 1px solid var(--color-border);
    }

    .event-log-item:last-child {
      border-bottom: none;
    }

    .event-log-time {
      color: var(--color-text-muted);
      margin-right: 0.5rem;
    }
  </style>
</head>
<body>
  <button class="theme-toggle" id="theme-toggle">ğŸŒ™ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</button>

  <h1>AlertBanner Component Demo</h1>
  <p>é€šçŸ¥ãƒãƒŠãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</p>

  <!-- Type Variants -->
  <div class="demo-section">
    <h2>ğŸ“Œ ã‚¿ã‚¤ãƒ—ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³</h2>

    <h3>Info (æƒ…å ±)</h3>
    <div id="demo-info" class="demo-container"></div>

    <h3>Success (æˆåŠŸ)</h3>
    <div id="demo-success" class="demo-container"></div>

    <h3>Warning (è­¦å‘Š)</h3>
    <div id="demo-warning" class="demo-container"></div>

    <h3>Error (ã‚¨ãƒ©ãƒ¼)</h3>
    <div id="demo-error" class="demo-container"></div>
  </div>

  <!-- With Action Button -->
  <div class="demo-section">
    <h2>ğŸ¯ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ä»˜ã</h2>
    <div id="demo-action" class="demo-container"></div>
    <div class="code-block">
createAlertBanner(container, {
  message: 'æ¥ç¶šãŒåˆ‡æ–­ã•ã‚Œã¾ã—ãŸã€‚',
  type: 'error',
  actionLabel: 'å†æ¥ç¶š'
}, {
  onAction: () => console.log('å†æ¥ç¶šä¸­...')
})</div>
  </div>

  <!-- Non-closable -->
  <div class="demo-section">
    <h2>ğŸ”’ é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ãªã—</h2>
    <div id="demo-non-closable" class="demo-container"></div>
    <div class="code-block">
createAlertBanner(container, {
  message: 'ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã§ã™...',
  type: 'warning',
  closable: false
})</div>
  </div>

  <!-- Interactive Controls -->
  <div class="demo-section">
    <h2>ğŸ® ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</h2>
    <div id="demo-interactive" class="demo-container"></div>
    <div class="demo-controls">
      <button id="btn-show">è¡¨ç¤º</button>
      <button id="btn-hide">éè¡¨ç¤º</button>
      <button id="btn-toggle">åˆ‡ã‚Šæ›¿ãˆ</button>
      <button id="btn-change-message">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¤‰æ›´</button>
      <button id="btn-change-to-error">ã‚¨ãƒ©ãƒ¼ã«å¤‰æ›´</button>
      <button id="btn-change-to-success">æˆåŠŸã«å¤‰æ›´</button>
    </div>
    <div id="event-log" class="event-log"></div>
  </div>

  <!-- Real-world Examples -->
  <div class="demo-section">
    <h2>ğŸ’¼ å®Ÿéš›ã®ä½¿ç”¨ä¾‹</h2>

    <h3>1. Speakeræœªè¨­å®šã®è­¦å‘Šï¼ˆHomeãƒšãƒ¼ã‚¸ï¼‰</h3>
    <div id="demo-speaker-warning" class="demo-container"></div>

    <h3>2. ã‚»ãƒƒã‚·ãƒ§ãƒ³æœŸé™åˆ‡ã‚Œè­¦å‘Š</h3>
    <div id="demo-session-warning" class="demo-container"></div>

    <h3>3. ä¿å­˜æˆåŠŸé€šçŸ¥</h3>
    <div id="demo-save-success" class="demo-container"></div>

    <h3>4. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼</h3>
    <div id="demo-network-error" class="demo-container"></div>
  </div>

  <script type="module">
    import { createAlertBanner } from '../src/renderer/components/alert-banner.ts'

    // Theme toggle
    const themeToggle = document.getElementById('theme-toggle')
    const htmlElement = document.documentElement

    themeToggle.addEventListener('click', () => {
      const currentTheme = htmlElement.getAttribute('data-theme')
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark'
      htmlElement.setAttribute('data-theme', newTheme)
      themeToggle.textContent = newTheme === 'dark' ? 'â˜€ï¸ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰' : 'ğŸŒ™ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰'
    })

    // Event logging
    function logEvent(message) {
      const eventLog = document.getElementById('event-log')
      const time = new Date().toLocaleTimeString('ja-JP')
      const item = document.createElement('div')
      item.className = 'event-log-item'
      item.innerHTML = `<span class="event-log-time">${time}</span>${message}`
      eventLog.insertBefore(item, eventLog.firstChild)
    }

    // Type Variants
    createAlertBanner(document.getElementById('demo-info'), {
      message: 'ã“ã‚Œã¯æƒ…å ±ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚',
      type: 'info'
    })

    createAlertBanner(document.getElementById('demo-success'), {
      message: 'æ“ä½œãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸï¼',
      type: 'success'
    })

    createAlertBanner(document.getElementById('demo-warning'), {
      message: 'è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚',
      type: 'warning'
    })

    createAlertBanner(document.getElementById('demo-error'), {
      message: 'ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚',
      type: 'error'
    })

    // With Action Button
    createAlertBanner(
      document.getElementById('demo-action'),
      {
        message: 'æ¥ç¶šãŒåˆ‡æ–­ã•ã‚Œã¾ã—ãŸã€‚',
        type: 'error',
        actionLabel: 'å†æ¥ç¶š'
      },
      {
        onAction: () => {
          alert('å†æ¥ç¶šä¸­...')
        },
        onClose: () => {
          console.log('ã‚¢ãƒ©ãƒ¼ãƒˆãŒé–‰ã˜ã‚‰ã‚Œã¾ã—ãŸ')
        }
      }
    )

    // Non-closable
    createAlertBanner(document.getElementById('demo-non-closable'), {
      message: 'ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã§ã™ã€‚å®Œäº†ã¾ã§ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„...',
      type: 'warning',
      closable: false
    })

    // Interactive Controls
    const interactiveContainer = document.getElementById('demo-interactive')
    const interactiveBanner = createAlertBanner(
      interactiveContainer,
      {
        message: 'ã“ã®ãƒãƒŠãƒ¼ã¯ä¸‹ã®ãƒœã‚¿ãƒ³ã§æ“ä½œã§ãã¾ã™',
        type: 'info',
        actionLabel: 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³'
      },
      {
        onAction: () => {
          logEvent('âœ… ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ')
        },
        onClose: () => {
          logEvent('âŒ é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ')
        }
      }
    )

    document.getElementById('btn-show').addEventListener('click', () => {
      interactiveBanner.show()
      logEvent('ğŸ‘ï¸ ãƒãƒŠãƒ¼ã‚’è¡¨ç¤ºã—ã¾ã—ãŸ')
    })

    document.getElementById('btn-hide').addEventListener('click', () => {
      interactiveBanner.hide()
      logEvent('ğŸ™ˆ ãƒãƒŠãƒ¼ã‚’éè¡¨ç¤ºã«ã—ã¾ã—ãŸ')
    })

    document.getElementById('btn-toggle').addEventListener('click', () => {
      const isVisible = interactiveBanner.isVisible()
      interactiveBanner.setVisible(!isVisible)
      logEvent(`ğŸ”„ ãƒãƒŠãƒ¼ã‚’${isVisible ? 'éè¡¨ç¤º' : 'è¡¨ç¤º'}ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸ`)
    })

    const messages = [
      'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ',
      'æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™',
      'åˆ¥ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸ',
      'ã“ã‚Œã¯å¤‰æ›´ã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™'
    ]
    let messageIndex = 0

    document.getElementById('btn-change-message').addEventListener('click', () => {
      const newMessage = messages[messageIndex % messages.length]
      interactiveBanner.setMessage(newMessage)
      logEvent(`ğŸ“ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¤‰æ›´: "${newMessage}"`)
      messageIndex++
    })

    document.getElementById('btn-change-to-error').addEventListener('click', () => {
      interactiveBanner.destroy()
      const newBanner = createAlertBanner(
        interactiveContainer,
        {
          message: 'ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸ',
          type: 'error',
          actionLabel: 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³'
        },
        {
          onAction: () => logEvent('âœ… ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ'),
          onClose: () => logEvent('âŒ é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ')
        }
      )
      logEvent('ğŸ”´ ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸ')
      // Update reference
      Object.assign(interactiveBanner, newBanner)
    })

    document.getElementById('btn-change-to-success').addEventListener('click', () => {
      interactiveBanner.destroy()
      const newBanner = createAlertBanner(
        interactiveContainer,
        {
          message: 'æˆåŠŸçŠ¶æ…‹ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸ',
          type: 'success',
          actionLabel: 'ã‚¢ã‚¯ã‚·ãƒ§ãƒ³'
        },
        {
          onAction: () => logEvent('âœ… ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ'),
          onClose: () => logEvent('âŒ é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ')
        }
      )
      logEvent('ğŸŸ¢ æˆåŠŸã‚¿ã‚¤ãƒ—ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸ')
      // Update reference
      Object.assign(interactiveBanner, newBanner)
    })

    // Real-world Examples

    // 1. Speaker Warning
    createAlertBanner(
      document.getElementById('demo-speaker-warning'),
      {
        message: 'SpeakerãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚è¨­å®šç”»é¢ã‹ã‚‰è¨­å®šã—ã¦ãã ã•ã„ã€‚',
        type: 'warning',
        actionLabel: 'è¨­å®šç”»é¢ã¸',
        role: 'alert',
        ariaLabel: 'è­¦å‘Š: Speakeræœªè¨­å®š'
      },
      {
        onAction: () => {
          alert('è¨­å®šç”»é¢ã«ç§»å‹•ã—ã¾ã™')
        }
      }
    )

    // 2. Session Warning
    let sessionTimer
    const sessionBanner = createAlertBanner(
      document.getElementById('demo-session-warning'),
      {
        message: 'ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æœ‰åŠ¹æœŸé™ãŒ5åˆ†å¾Œã«åˆ‡ã‚Œã¾ã™ã€‚',
        type: 'warning',
        actionLabel: 'ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å»¶é•·',
        role: 'alert'
      },
      {
        onAction: () => {
          sessionBanner.setMessage('ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å»¶é•·ã—ã¾ã—ãŸã€‚')
          sessionBanner.destroy()
          const successBanner = createAlertBanner(
            document.getElementById('demo-session-warning'),
            {
              message: 'ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å»¶é•·ã—ã¾ã—ãŸã€‚',
              type: 'success'
            }
          )
          setTimeout(() => successBanner.hide(), 3000)
        }
      }
    )

    // 3. Save Success
    const saveBanner = createAlertBanner(
      document.getElementById('demo-save-success'),
      {
        message: 'å¤‰æ›´ãŒæ­£å¸¸ã«ä¿å­˜ã•ã‚Œã¾ã—ãŸã€‚',
        type: 'success',
        visible: true
      }
    )
    // Auto-hide after 5 seconds
    setTimeout(() => {
      if (saveBanner.isVisible()) {
        saveBanner.hide()
      }
    }, 5000)

    // 4. Network Error
    createAlertBanner(
      document.getElementById('demo-network-error'),
      {
        message: 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚',
        type: 'error',
        actionLabel: 'å†è©¦è¡Œ',
        role: 'alert'
      },
      {
        onAction: () => {
          alert('å†è©¦è¡Œä¸­...')
          // Simulate retry logic
        }
      }
    )
  </script>
</body>
</html>
